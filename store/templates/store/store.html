{% extends 'store/main.html' %}
{% load static %}
{% block navigation %}
<ul class="navbar-nav mr-auto">
    <li class="nav-item">
      <a class="nav-link active" href="{% url 'store' %}">Home <span class="sr-only">(current)</span></a>
    </li>
    <br>
    <br>
    <li class="nav-item">
      <a class="nav-link" data-scroll="true" href="#Hotdogs">HotDogs</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" data-scroll="true" href="#Soups and Salads">Soups and Salads</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" data-scroll="true" href="#Desserts">Desserts</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" data-scroll="true" href="#Sandwiches">Sandwiches</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" data-scroll="true" href="#Drinks">Drinks</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" data-scroll="true" href="#Sides">Side Dishes</a>
    </li>
    <li class="nav-itemW">
      <a class="nav-link" data-scroll="true" href="#Breakfast">Breakfast</a>
    </li>
</ul>

{% endblock %}
{% block content %}
  <section id="Hotdogs">
  <H2>Hot Dogs</H2>
  
  <div class="row">
  {% for product in hotdogs %} 
      <div class="col-lg-3">
          <img class="thumbnail" src="{{product.imageURL}}">
          <div class="box-element product">
            <h6><Strong>{{product.name}}</Strong></h6>
            <div class="description">
                {{product.description}}
            </div>
            <hr class="hr">
              <button data-toggle="modal" data-target="#productModal" data-product={{product.id}} data-combo={{product.combo}} data-action="add" data-price={{product.price}} data-category="Hotdogs" class="btn btn-outline-secondary add-btn update-side">Add to Cart</button>
              {% comment %} <a class="btn btn-outline-success" href="#">View</a> {% endcomment %}
              <h4 style="display: inline-block; float: right">
                  <Strong id='price'>
                      ${{product.price|floatformat:2}}
                  </Strong>
              </h4>
          </div>
      </div>
  {% endfor %}
  </div>
  </section>

  <br>
  <section id="Soups and Salads">
  <H2>Soups and Salads</H2>

  <div class="row">
  {% for product in soups %} 
      <div class="col-lg-3">
          <img class="thumbnail" src="{{product.imageURL}}">
          <div class="box-element product">
            <h6><Strong>{{product.name}}</Strong></h6>
            <div class="description">
                {{product.description}}
            </div>
            <hr>
              <button data-toggle="modal" data-target="#productModal" data-product={{product.id}} data-combo={{product.combo}} data-action="add" data-price={{product.price}} data-category="Soups" class="btn btn-outline-secondary add-btn update-side">Add to Cart</button>
              {% comment %} <a class="btn btn-outline-success" href="#">View</a> {% endcomment %}
              <h4 style="display: inline-block; float: right">
                  <Strong id='price'>
                      ${{product.price|floatformat:2}}
                  </Strong>
              </h4>
          </div>
      </div>
  {% endfor %}
  </div>
  </section>
  
  <br>
  <section id="Desserts">
  <H2>Desserts</H2>
  <div class="row">
  {% for product in desserts %}
      <div class="col-lg-3">
          <img class="thumbnail" src="{{product.imageURL}}">
          <div class="box-element product">
            <h6><Strong>{{product.name}}</Strong></h6>
            <div class="description">
                {{product.description}}
            </div>
            <hr>
              <button data-toggle="modal" data-target="#productModal" data-product={{product.id}} data-action="add" data-price={{product.price}} data-category="Desserts" class="btn btn-outline-secondary add-btn update-side">Add to Cart</button>
              {% comment %} <a class="btn btn-outline-success" href="#">View</a> {% endcomment %}
              <h4 style="display: inline-block; float: right">
                  <Strong id='price'>
                      ${{product.price|floatformat:2}}
                  </Strong>
              </h4>
          </div>
      </div>
  {% endfor %}
  </div>
  </section>

  <br>
  <section id="Sandwiches">
  <H2>Sandwiches</H2>
  <div class="row">
  {% for product in sandwiches %}
      <div class="col-lg-3">
          <img class="thumbnail" src="{{product.imageURL}}">
          <div class="box-element product">
            <h6><Strong>{{product.name}}</Strong></h6>
            <div class="description">
                {{product.description}}
            </div>
            <hr>
              <button data-toggle="modal" data-target="#productModal" data-product={{product.id}} data-name={{product.name}} data-combo={{product.combo}} data-size={{product.size}} data-action="add" data-price={{product.price}} data-category="Sandwiches" class="btn btn-outline-secondary add-btn update-side">Add to Cart</button>
              {% comment %} <a class="btn btn-outline-success" href="#">View</a> {% endcomment %}
              <h4 style="display: inline-block; float: right">
                  <Strong id='price'>
                      ${{product.price|floatformat:2}}
                  </Strong>
              </h4>
          </div>
      </div>
      {% if forloop.counter|divisibleby:4 %}
            </div><div class="row">
      {% endif %}
  {% endfor %}
  </div>
  </section>
  
  <br>
  <section id="Drinks">
  <H2>Drinks</H2>
  <div class="row">
  {% for product in drinks %}
      <div class="col-lg-3">
          <img class="thumbnail" src="{{product.imageURL}}">
          <div class="box-element product">
              <h6><Strong>{{product.name}}</Strong></h6>
                <div class="description">
                    {{product.description}}
                </div>
                <hr>
              <button data-toggle="modal" data-target="#productModal" data-product={{product.id}} data-name={{product.name}} data-action="add" data-price={{product.price}} data-category="Drinks" class="btn btn-outline-secondary add-btn update-side">Add to Cart</button>
              {% comment %} <a class="btn btn-outline-success" href="#">View</a> {% endcomment %}
              <h4 style="display: inline-block; float: right">
                  <Strong id='price'>
                      ${{product.price|floatformat:2}}
                  </Strong>
              </h4>
          </div>
      </div>
  {% endfor %}
  </div>
  </section>

  <br>
  <section id="Sides">
  <H2>Sides</H2>
  <div class="row">
  {% for product in sides %}
      <div class="col-lg-3">
          <img class="thumbnail" src="{{product.imageURL}}">
          <div class="box-element product">
            <h6><Strong>{{product.name}}</Strong></h6>
            <div class="description">
                {{product.description}}
            </div>
            <hr>
              <button data-toggle="modal" data-target="#productModal" data-product={{product.id}} data-name={{product.name}} data-action="add" data-price={{product.price}} data-category="Sides" class="btn btn-outline-secondary add-btn update-side">Add to Cart</button>
              {% comment %} <a class="btn btn-outline-success" href="#">View</a> {% endcomment %}
              <h4 style="display: inline-block; float: right">
                  <Strong id='price'>
                      ${{product.price|floatformat:2}}
                  </Strong>
              </h4>
          </div>
      </div>
  {% endfor %}
  </div>
  </section>

  <br>
  <section id="Breakfast">
  <H2>Breakfast</H2>
  <div class="row">
  {% for product in breakfast %}
      <div class="col-lg-3">
          <img class="thumbnail" src="{{product.imageURL}}">
          <div class="box-element product">
            <h6><Strong>{{product.name}}</Strong></h6>
            <div class="description">
                {{product.description}}
            </div>
            <hr>
              <button data-toggle="modal" data-target="#productModal" data-product={{product.id}} data-action="add" data-price={{product.price}} data-category="Breakfast" class="btn btn-outline-secondary add-btn update-side">Add to Cart</button>
              {% comment %} <a class="btn btn-outline-success" href="#">View</a> {% endcomment %}
              <h4 style="display: inline-block; float: right">
                  <Strong id='price'>
                      ${{product.price|floatformat:2}}
                  </Strong>
              </h4>
          </div>
      </div>
  {% endfor %}
  </div>
  </section>

    {% comment %} This is the modal that pops up when you click on a product {% endcomment %}
    <div class="modal fade" id="productModal" tabindex="-1" role="dialog" aria-labelledby="productModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <!-- Content will be dynamically populated based on the category -->

            </div>
        </div>
    </div>
    
    <div class="overlay" id="overlay"></div>


      <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
      <script>

        // Get the modal
        let currentProductPrice = 0;
        $( document ).ready(function() {
        
            $('#productModal').on('show.bs.modal', function(event) {
                const button = $(event.relatedTarget); // Button that triggered the modal
                const category = button.data('category'); // Extract info from data-* attributes
                const price = button.data('price');
                currentProductPrice = price;
                const modal = $(this);
                modal.find('.modal-content').empty();
                const name = button.data('name');
                const size = button.data('size');
                const combo = button.data('combo');
                console.log(combo)
                console.log(typeof combo)
                console.log(button)
                const comboString = `<h3>Choose a side (Required - Choose 1)</h3>
                <label><input type="radio" name="side" value="Lays Plain"> Lays Plain</label>
                <label><input type="radio" name="side" value="Slaw" data-price="0.40" readonly> Slaw + $0.40</label>
                <label><input type="radio" name="side" value="Potato Salad" data-price="0.40" readonly> Potato Salad + $0.40</label>
                <label><input type="radio" name="side" value="Macaroni Salad" data-price="0.40" readonly> Macaroni Salad + $0.40</label>
                <label><input type="radio" name="side" value="Deviled Eggs" data-price="0.40" readonly> Deviled Eggs + $0.40</label>
                <label><input type="radio" name="side" value="Deep River Chips Jalapeno"> Deep River Chips Jalapeno</label>
                <label><input type="radio" name="side" value="Lays BBQ"> Lays BBQ</label>
                <label><input type="radio" name="side" value="Deep River Chips Salt and Vinegar"> Deep River Chips Salt and Vinegar</label>
                <label><input type="radio" name="side" value="Deep River Chips BBQ"> Deep River Chips BBQ</label>
                <label><input type="radio" name="side" value="Deep River Chips Sour Cream and Onion"> Deep River Chips Sour Cream and Onion</label>
                <label><input type="radio" name="side" value="Fritos"> Fritos</label>
                <label><input type="radio" name="side" value="Fries" data-price="0.40" readonly> Fries + $0.40</label>


                <h3>Choose a soda (Required - Choose 1)</h3>
                <label><input type="radio" name="soda" value="Pepsi"> Pepsi</label>
                <label><input type="radio" name="soda" value="Diet Pepsi"> Diet Pepsi</label>
                <label><input type="radio" name="soda" value="Mountain Dew"> Mountain Dew</label>
                <label><input type="radio" name="soda" value="Dr Pepper"> Dr Pepper</label>
                <label><input type="radio" name="soda" value="Diet Dr Pepper"> Diet Dr Pepper</label>
                <label><input type="radio" name="soda" value="Root Beer"> Root Beer</label>
                <label><input type="radio" name="soda" value="Sierra Mist"> Sierra Mist</label>
                <label><input type="radio" name="soda" value="Orange Gatorade"> Orange Gatorade</label>
                <label><input type="radio" name="soda" value="Sweet Tea"> Sweet Tea</label>
                <label><input type="radio" name="soda" value="Unsweet Tea"> UNSWEET TEA</label>
                <label><input type="radio" name="soda" value="Home Made Lemonade"> Home Made Lemonade</label>
                <label><input type="radio" name="soda" value="Bottled Water"> Bottled Water</label>

                <label>Quantity: <input type="number" name="quantity" value="1" min="1"></label>
                <textarea placeholder="Special Instructions" name="instructions"></textarea>
                <button data-product={{product.id}} data-action="add" id="addIngredientsBtn" disabled>Add Ingredients</button>
                </form>
                </div>`
                // BLT sandwich, egg salad sandwich, pimento cheese sandwich, and grilled cheese sandwich are special cases
                // BLT sandwich[7.25, 8.75], egg salad sandwich[5.50, 6.75], pimento cheese sandwich[5.50, 6.75], and grilled cheese sandwich[4.25, 5.40]
                // BLT sandwich combo[11.50, 13.00], egg salad sandwich combo[9.55, 11.00], pimento cheese sandwich combo[8.90, 10.05], and grilled cheese sandwich combo[7.65, 8.80]
                const BLT_Size = `<h3>Please choose a size (Required - Choose 1)</h3>
                <label><input type="radio" name="size" value="Regular"> Regular $7.25</label>
                <label><input type="radio" name="size" value="Large" data-price="1.50"> Large $8.75</label>`
                const BLT_SizeCombo = `<h3>Please choose a size (Required - Choose 1)</h3>
                <label><input type="radio" name="size" value="Regular"> Regular $11.50</label>
                <label><input type="radio" name="size" value="Large" data-price="1.50"> Large $13.00</label>`
                const Egg_SaladSize = `<h3>Please choose a size (Required - Choose 1)</h3>
                <label><input type="radio" name="size" value="Regular"> Regular $5.50</label>
                <label><input type="radio" name="size" value="Large" data-price="1.25"> Large $6.75</label>`
                const Egg_SaladSizeCombo = `<h3>Please choose a size (Required - Choose 1)</h3>
                <label><input type="radio" name="size" value="Regular"> Regular $9.55</label>
                <label><input type="radio" name="size" value="Large" data-price="1.45"> Large $11.00</label>`
                const Pimento_CheeseSize = `<h3>Please choose a size (Required - Choose 1)</h3>
                <label><input type="radio" name="size" value="Regular"> Regular $5.50</label>
                <label><input type="radio" name="size" value="Large" data-price="1.25"> Large $6.75</label>`
                const Pimento_CheeseSizeCombo = `<h3>Please choose a size (Required - Choose 1)</h3>
                <label><input type="radio" name="size" value="Regular"> Regular $8.90</label>
                <label><input type="radio" name="size" value="Large" data-price="1.15"> Large $10.05</label>`
                const Grilled_CheeseSize = `<h3>Please choose a size (Required - Choose 1)</h3>
                <label><input type="radio" name="size" value="Regular"> Regular $4.25</label>
                <label><input type="radio" name="size" value="Large" data-price="1.15"> Large $5.40</label>`
                const Grilled_CheeseSizeCombo = `<h3>Please choose a size (Required - Choose 1)</h3>
                <label><input type="radio" name="size" value="Regular"> Regular $7.65</label>
                <label><input type="radio" name="size" value="Large" data-price="1.15"> Large $8.80</label>`
                
                const specialCase = {'BLT': BLT_Size, 'Egg Salad': Egg_SaladSize, 'Pimento Cheese': Pimento_CheeseSize, 'Grilled Cheese': Grilled_CheeseSize}
                const specialCaseCombo = {'BLT': BLT_SizeCombo, 'Egg Salad': Egg_SaladSizeCombo, 'Pimento Cheese': Pimento_CheeseSizeCombo, 'Grilled Cheese': Grilled_CheeseSizeCombo}
                switch (category) {

                    case 'Hotdogs':
                    // combo hotdogs pop up form
                        if(combo == "True"){
                            modal.find('.modal-content').append(`
                                <div class="popup" id="popup">
                                    <h2>Choose sides for Hotdogs combo (required).</h2>
                                    <form>
                                        <h3>Choose your dressings (Required - Choose at least 1)</h3>
                                        <label><input type="checkbox" name="topping" value="Add Mustard"> Add Mustard</label>
                                        <label><input type="checkbox" name="topping" value="Add Ketchup"> Add Ketchup</label>
                                        <label><input type="checkbox" name="topping" value="Add Chili"> Add Chili</label>
                                        <label><input type="checkbox" name="topping" value="Add Onions"> Add Onions</label>
                                        <label><input type="checkbox" name="topping" value="Add Slaw"> Add Slaw</label>
                                        <label><input type="checkbox" name="topping" value="Add Relish"> Add Relish</label>
                                        <label><input type="checkbox" name="topping" value="Add Spicy Mustard"> Add Spicy Mustard</label>
                                        <label><input type="checkbox" name="topping" value="Add Kraut"> Add Kraut</label>
                                        <label><input type="checkbox" name="topping" value="Add Cheese"> Add Cheese</label>
                                        <label><input type="checkbox" name="topping" value="Add Mayo"> Add Mayo</label>
                                        <label><input type="checkbox" name="topping" value="Add Red Onion Sauce"> Add Red Onion Sauce</label>
                                        <label><input type="checkbox" name="topping" value="Add Pickles"> Add Pickles</label>
                                        <label><input type="checkbox" name="topping" value="Add Jalapenos"> Add Jalapenos</label>
                                        <label><input type="checkbox" name="topping" value="Add Grilled Peppers and Onions"> Add Grilled Peppers and Onions</label>
                                        <label><input type="checkbox" name="topping" value="Add Tomatoes"> Add Tomatoes</label>
                                        <label><input type="checkbox" name="topping" value="Plain"> Plain</label>

                                        ` + comboString
                            );
                        // For regular hotdogs pop up form
                        } else {
                            modal.find('.modal-content').append(`
                                <div class="popup" id="popup">
                                    <h2>Choose a side for Hotdogs (required).</h2>
                                    <form>
                                        <label><input type="checkbox" name="topping" value="Add Mustard"> Add Mustard</label>
                                        <label><input type="checkbox" name="topping" value="Add Ketchup"> Add Ketchup</label>
                                        <label><input type="checkbox" name="topping" value="Add Chili"> Add Chili</label>
                                        <label><input type="checkbox" name="topping" value="Add Onions"> Add Onions</label>
                                        <label><input type="checkbox" name="topping" value="Add Slaw"> Add Slaw</label>
                                        <label><input type="checkbox" name="topping" value="Add Relish"> Add Relish</label>
                                        <label><input type="checkbox" name="topping" value="Add Spicy Mustard"> Add Spicy Mustard</label>
                                        <label><input type="checkbox" name="topping" value="Add Kraut"> Add Kraut</label>
                                        <label><input type="checkbox" name="topping" value="Add Cheese"> Add Cheese</label>
                                        <label><input type="checkbox" name="topping" value="Add Mayo"> Add Mayo</label>
                                        <label><input type="checkbox" name="topping" value="Add Red Onion Sauce"> Add Red Onion Sauce</label>
                                        <label><input type="checkbox" name="topping" value="Add Pickles"> Add Pickles</label>
                                        <label><input type="checkbox" name="topping" value="Add Jalapenos"> Add Jalapenos</label>
                                        <label><input type="checkbox" name="topping" value="Add Grilled Peppers and Onions"> Add Grilled Peppers and Onions</label>
                                        <label><input type="checkbox" name="topping" value="Add Tomatoes"> Add Tomatoes</label>
                                        <label><input type="checkbox" name="topping" value="Plain"> Plain</label>

                                        <label>Quantity: <input type="number" name="quantity" value="1" min="1"></label>
                                        <textarea placeholder="Special Instructions" name="instructions"></textarea>
                                        <button data-product={{product.id}} data-action="add" id="addIngredientsBtn" disabled>Add Ingredients</button>
                                    </form>
                                </div>
                            `);
                        };
                        break;

                        
                    case 'Soups':
                        // Soups and Salads combo pop up form
                        if (combo == "True"){
                            modal.find('.modal-content').append(`
                                <div class="popup" id="popup">
                                    <form>
                                        <h3>Choose a dressing (Required - Choose 1)</h3>
                                        <label><input type="radio" name="soups-dressing" value="Ranch Dressing"> Ranch Dressing</label>
                                        <label><input type="radio" name="soups-dressing" value="Italian Dressing"> Italian Dressing</label>
                                        <label><input type="radio" name="soups-dressing" value="French Dressing"> French Dressing</label>
                                        <label><input type="radio" name="soups-dressing" value="Thousand Island"> Thousand Island Dressing</label>
                                        <label><input type="radio" name="soups-dressing" value="Honey Mustard Dressing"> Honey Mustard Dressing</label>
                                        
                                        
                                        <h3>Would you like toppings? (Required - Choose a minimum of 1)</h3>
                                        <label><input type="checkbox" name="topping" value="Add Lettuce"> Lettuce</label>
                                        <label><input type="checkbox" name="topping" value="Add Tomato"> Tomato</label>
                                        <label><input type="checkbox" name="topping" value="Add Cucumber"> Cucumber</label>
                                        <label><input type="checkbox" name="topping" value="Add Onions"> Onions</label>
                                        <label><input type="checkbox" name="topping" value="Add Olives"> Olives</label>
                                        <label><input type="checkbox" name="topping" value="Add Eggs"> Eggs</label>
                                        <label><input type="checkbox" name="topping" value="Add Green peppers"> Green Peppers</label>
                                        <label><input type="checkbox" name="topping" value="Add Banana Peppers"> Banana Peppers</label>
                                        <label><input type="checkbox" name="topping" value="Add Jalapeno Peppers"> Jalapeno Peppers</label>
                                        <label><input type="checkbox" name="topping" value="Add Salt and Pepper"> Salt and Pepper</label>
                                        <label><input type="checkbox" name="topping" value="Add Oregano"> Oregano</label>
                                        <label><input type="checkbox" name="topping" value="Add Oil-and-Vinegar"> Oil and Vinegar</label>
                                        <label><input type="checkbox" name="topping" value="Add Pickles"> Pickles</label>
                                        <label><input type="checkbox" name="topping" value="Add American Cheese"> American Cheese</label>
                                        <label><input type="checkbox" name="topping" value="Add Provolone Cheese"> Provolone Cheese</label>
                                        <label><input type="checkbox" name="topping" value="Add Swiss Cheese"> Swiss Cheese</label>
 
                            ` + comboString);
                        // Soups and Salads regular pop up form
                        } else {
                            modal.find('.modal-content').append(`
                                <div class="popup" id="popup">
                                    <form>
                                        <h3>Choose a dressing (Required - Choose 1)</h3>
                                        <label><input type="radio" name="soups-dressing" value="Ranch Dressing"> Ranch Dressing</label>
                                        <label><input type="radio" name="soups-dressing" value="Italian Dressing"> Italian Dressing</label>
                                        <label><input type="radio" name="soups-dressing" value="French Dressing"> French Dressing</label>
                                        <label><input type="radio" name="soups-dressing" value="Thousand Island"> Thousand Island Dressing</label>
                                        <label><input type="radio" name="soups-dressing" value="Honey Mustard Dressing"> Honey Mustard Dressing</label>
                                        
                                        
                                        <h3>Would you like toppings? (Required - Choose a minimum of 1)</h3>
                                        <label><input type="checkbox" name="topping" value="Add Lettuce"> Lettuce</label>
                                        <label><input type="checkbox" name="topping" value="Add Tomato"> Tomato</label>
                                        <label><input type="checkbox" name="topping" value="Add Cucumber"> Cucumber</label>
                                        <label><input type="checkbox" name="topping" value="Add Onions"> Onions</label>
                                        <label><input type="checkbox" name="topping" value="Add Olives"> Olives</label>
                                        <label><input type="checkbox" name="topping" value="Add Eggs"> Eggs</label>
                                        <label><input type="checkbox" name="topping" value="Add Green peppers"> Green Peppers</label>
                                        <label><input type="checkbox" name="topping" value="Add Banana Peppers"> Banana Peppers</label>
                                        <label><input type="checkbox" name="topping" value="Add Jalapeno Peppers"> Jalapeno Peppers</label>
                                        <label><input type="checkbox" name="topping" value="Add Salt and Pepper"> Salt and Pepper</label>
                                        <label><input type="checkbox" name="topping" value="Add Oregano"> Oregano</label>
                                        <label><input type="checkbox" name="topping" value="Add Oil-and-Vinegar"> Oil and Vinegar</label>
                                        <label><input type="checkbox" name="topping" value="Add Pickles"> Pickles</label>
                                        <label><input type="checkbox" name="topping" value="Add American Cheese"> American Cheese</label>
                                        <label><input type="checkbox" name="topping" value="Add Provolone Cheese"> Provolone Cheese</label>
                                        <label><input type="checkbox" name="topping" value="Add Swiss Cheese"> Swiss Cheese</label>
                                        

                                        <label>Quantity: <input type="number" name="quantity" value="1" min="1"></label>
                                        <textarea placeholder="Special Instructions" name="instructions"></textarea>
                                        <button data-product={{product.id}} data-action="add" id="addIngredientsBtn" disabled>Add Ingredients</button>
                                    </form>
                                </div>
                            `);
                        }
                        break;


                    case 'Desserts':
                    // Desserts does not have any combo options
                    modal.find('.modal-content').append(`
                        <div class="popup" id="popup">
                            <form>
                                <label>Quantity: <input type="number" name="quantity" value="1" min="1"></label>
                                <textarea placeholder="Special Instructions" name="instructions"></textarea>
                                <button data-product={{product.id}} data-action="add" id="addIngredientsBtn" disabled>Add Ingredients</button>
                            </form>
                        </div>
                    `);
                        break;

                    // BLT sandwich, egg salad sandwich, pimento cheese sandwich, and grilled cheese sandwich are special cases
                    case 'Sandwiches':
                    
                    if (combo == "True") {
                        let str = null;
                        for (const [key, value] of Object.entries(specialCaseCombo)) {
                            if (key.includes(name.split(" ")[0])) {
                                str = value;
                            }
                        }
                        // Handle the special cases for sandwiches
                        if (str != null) {
                            modal.find('.modal-content').append(`
                            <div class="popup" id="popup">
                                <form>` + str + `
                                    <h3>Choose a bread (Required - Choose 1)</h3>
                                    <label><input type="radio" name="bread" value="White Bread"> White Bread</label>
                                    <label><input type="radio" name="bread" value="Wheat Bread"> Wheat Bread</label>
                                    <label><input type="radio" name="bread" value="Rye Bread"> Rye Bread</label>
    
                                    <h3>Choose a cheese (Required - Choose 1)</h3>
                                    <label><input type="radio" name="cheese" value="American Cheese"> American Cheese</label>
                                    <label><input type="radio" name="cheese" value="Provolone Cheese"> Provolone Cheese</label>
                                    <label><input type="radio" name="cheese" value="Swiss Cheese"> Swiss Cheese</label>
                                    <label><input type="radio" name="cheese" value="Pepper Jack"> Pepper Jack</label>
    
                                    <h3>Would you like toppings? (Optional - Choose as many as you like)</h3>
                                    <label><input type="checkbox" name="topping" value="Add Lettuce"> Add Lettuce</label>
                                    <label><input type="checkbox" name="topping" value="Add Tomato"> Add Tomato</label>
                                    <label><input type="checkbox" name="topping" value="Add Mayo"> Add Mayo</label>
                                    <label><input type="checkbox" name="topping" value="Add Mustard"> Add Mustard</label>
                                    <label><input type="checkbox" name="topping" value="Add Onions"> Add Onions</label>
                                    <label><input type="checkbox" name="topping" value="Add Pickles"> Add Pickles</label>
                                    <label><input type="checkbox" name="topping" value="Add Olives"> Add Olives</label>
                                    <label><input type="checkbox" name="topping" value="Add American Cheese"> Add American Cheese</label>
                                    <label><input type="checkbox" name="topping" value="Add Provolone Cheese"> Add Provolone Cheese</label>
                                    <label><input type="checkbox" name="topping" value="Add Swiss Cheese"> Add Swiss Cheese</label>
                                    <label><input type="checkbox" name="topping" value="Add Green Peppers"> Add Green Peppers</label>
                                    <label><input type="checkbox" name="topping" value="Add Banana Peppers"> Add Banana Peppers</label>
                                    <label><input type="checkbox" name="topping" value="Add Jalapeno Peppers"> Add Jalapeno Peppers</label>
                                    <label><input type="checkbox" name="topping" value="Add Cucumbers"> Add Cucumbers</label>
                                    <label><input type="checkbox" name="topping" value="Add Oil"> Add Oil</label>
                                    <label><input type="checkbox" name="topping" value="Add Vinegar"> Add Vinegar</label>
                                    <label><input type="checkbox" name="topping" value="Add Salt"> Add Salt</label>
                                    <label><input type="checkbox" name="topping" value="Add Pepper"> Add Pepper</label>
                                    <label><input type="checkbox" name="topping" value="Add Oregano"> Add Oregano</label>

                            ` + comboString
                            );
                        } else {
                            // If the sandwich is not a special case
                            modal.find('.modal-content').append(`
                                <div class="popup" id="popup">
                                    <form>
                                        <h3>Please choose a size (Required - Choose 1)</h3>
                                        <label><input type="radio" name="size" value="Regular" readonly> Regular $11.25</label>
                                        <label><input type="radio" name="size" value="Large" data-price="1.50" readonly> Large $12.75</label>

                                        <h3>Choose a bread (Required - Choose 1)</h3>
                                        <label><input type="radio" name="bread" value="White Bread"> White Bread</label>
                                        <label><input type="radio" name="bread" value="Wheat Bread"> Wheat Bread</label>
                                        <label><input type="radio" name="bread" value="Rye Bread"> Rye Bread</label>

                                        <h3>Would you like toppings? (Optional - Choose as many as you like)</h3>
                                        <label><input type="checkbox" name="topping" value="Add Lettuce"> Add Lettuce</label>
                                        <label><input type="checkbox" name="topping" value="Add Tomato"> Add Tomato</label>
                                        <label><input type="checkbox" name="topping" value="Add Mayo"> Add Mayo</label>
                                        <label><input type="checkbox" name="topping" value="Add Mustard"> Add Mustard</label>
                                        <label><input type="checkbox" name="topping" value="Add Onions"> Add Onions</label>
                                        <label><input type="checkbox" name="topping" value="Add Pickles"> Add Pickles</label>
                                        <label><input type="checkbox" name="topping" value="Add Olives"> Add Olives</label>
                                        <label><input type="checkbox" name="topping" value="Add American Cheese"> Add American Cheese</label>
                                        <label><input type="checkbox" name="topping" value="Add Provolone Cheese"> Add Provolone Cheese</label>
                                        <label><input type="checkbox" name="topping" value="Add Swiss Cheese"> Add Swiss Cheese</label>
                                        <label><input type="checkbox" name="topping" value="Add Green Peppers"> Add Green Peppers</label>
                                        <label><input type="checkbox" name="topping" value="Add Banana Peppers"> Add Banana Peppers</label>
                                        <label><input type="checkbox" name="topping" value="Add Jalapeno Peppers"> Add Jalapeno Peppers</label>
                                        <label><input type="checkbox" name="topping" value="Add Cucumbers"> Add Cucumbers</label>
                                        <label><input type="checkbox" name="topping" value="Add Oil"> Add Oil</label>
                                        <label><input type="checkbox" name="topping" value="Add Vinegar"> Add Vinegar</label>
                                        <label><input type="checkbox" name="topping" value="Add Salt"> Add Salt</label>
                                        <label><input type="checkbox" name="topping" value="Add Pepper"> Add Pepper</label>
                                        <label><input type="checkbox" name="topping" value="Add Oregano"> Add Oregano</label>

                                ` + comboString );
                        }

                    } else {
                        let str = null;
                        for (const [key, value] of Object.entries(specialCase)) {
                            if (key.includes(name.split(" ")[0])) {
                                str = value;
                            }
                        }
                        // Handle the special cases for sandwiches
                        if (str != null) {
                            modal.find('.modal-content').append(`
                            <div class="popup" id="popup">
                                <form>` + str + `
                                    <h3>Choose a bread (Required - Choose 1)</h3>
                                    <label><input type="radio" name="bread" value="White Bread"> White Bread</label>
                                    <label><input type="radio" name="bread" value="Wheat Bread"> Wheat Bread</label>
                                    <label><input type="radio" name="bread" value="Rye Bread"> Rye Bread</label>
    
                                    <h3>Choose a cheese (Required - Choose 1)</h3>
                                    <label><input type="radio" name="cheese" value="American Cheese"> American Cheese</label>
                                    <label><input type="radio" name="cheese" value="Provolone Cheese"> Provolone Cheese</label>
                                    <label><input type="radio" name="cheese" value="Swiss Cheese"> Swiss Cheese</label>
                                    <label><input type="radio" name="cheese" value="Pepper Jack"> Pepper Jack</label>
    
                                    <h3>Would you like toppings? (Optional - Choose as many as you like)</h3>
                                    <label><input type="checkbox" name="topping" value="Add Lettuce"> Add Lettuce</label>
                                    <label><input type="checkbox" name="topping" value="Add Tomato"> Add Tomato</label>
                                    <label><input type="checkbox" name="topping" value="Add Mayo"> Add Mayo</label>
                                    <label><input type="checkbox" name="topping" value="Add Mustard"> Add Mustard</label>
                                    <label><input type="checkbox" name="topping" value="Add Onions"> Add Onions</label>
                                    <label><input type="checkbox" name="topping" value="Add Pickles"> Add Pickles</label>
                                    <label><input type="checkbox" name="topping" value="Add Olives"> Add Olives</label>
                                    <label><input type="checkbox" name="topping" value="Add American Cheese"> Add American Cheese</label>
                                    <label><input type="checkbox" name="topping" value="Add Provolone Cheese"> Add Provolone Cheese</label>
                                    <label><input type="checkbox" name="topping" value="Add Swiss Cheese"> Add Swiss Cheese</label>
                                    <label><input type="checkbox" name="topping" value="Add Green Peppers"> Add Green Peppers</label>
                                    <label><input type="checkbox" name="topping" value="Add Banana Peppers"> Add Banana Peppers</label>
                                    <label><input type="checkbox" name="topping" value="Add Jalapeno Peppers"> Add Jalapeno Peppers</label>
                                    <label><input type="checkbox" name="topping" value="Add Cucumbers"> Add Cucumbers</label>
                                    <label><input type="checkbox" name="topping" value="Add Oil"> Add Oil</label>
                                    <label><input type="checkbox" name="topping" value="Add Vinegar"> Add Vinegar</label>
                                    <label><input type="checkbox" name="topping" value="Add Salt"> Add Salt</label>
                                    <label><input type="checkbox" name="topping" value="Add Pepper"> Add Pepper</label>
                                    <label><input type="checkbox" name="topping" value="Add Oregano"> Add Oregano</label>
    
    
                                    <label>Quantity: <input type="number" name="quantity" value="1" min="1"></label>
                                    <textarea placeholder="Special Instructions" name="instructions"></textarea>
                                    <button data-product={{product.id}} data-action="add" id="addIngredientsBtn" disabled>Add Ingredients</button>
                                </form>
                            </div>
                            `);
                        } else {
                            modal.find('.modal-content').append(`
                                <div class="popup" id="popup">
                                    <form>
                                        <h3>Please choose a size (Required - Choose 1)</h3>
                                        <label><input type="radio" name="size" value="Regular" readonly> Regular $11.25</label>
                                        <label><input type="radio" name="size" value="Large" data-price="1.50" readonly> Large $12.75</label>

                                        <h3>Choose a bread (Required - Choose 1)</h3>
                                        <label><input type="radio" name="bread" value="White Bread"> White Bread</label>
                                        <label><input type="radio" name="bread" value="Wheat Bread"> Wheat Bread</label>
                                        <label><input type="radio" name="bread" value="Rye Bread"> Rye Bread</label>

                                        <label><input type="checkbox" name="topping" value="Add Lettuce"> Add Lettuce</label>
                                        <label><input type="checkbox" name="topping" value="Add Tomato"> Add Tomato</label>
                                        <label><input type="checkbox" name="topping" value="Add Mayo"> Add Mayo</label>
                                        <label><input type="checkbox" name="topping" value="Add Mustard"> Add Mustard</label>
                                        <label><input type="checkbox" name="topping" value="Add Onions"> Add Onions</label>
                                        <label><input type="checkbox" name="topping" value="Add Pickles"> Add Pickles</label>
                                        <label><input type="checkbox" name="topping" value="Add Olives"> Add Olives</label>
                                        <label><input type="checkbox" name="topping" value="Add American Cheese"> Add American Cheese</label>
                                        <label><input type="checkbox" name="topping" value="Add Provolone Cheese"> Add Provolone Cheese</label>
                                        <label><input type="checkbox" name="topping" value="Add Swiss Cheese"> Add Swiss Cheese</label>
                                        <label><input type="checkbox" name="topping" value="Add Green Peppers"> Add Green Peppers</label>
                                        <label><input type="checkbox" name="topping" value="Add Banana Peppers"> Add Banana Peppers</label>
                                        <label><input type="checkbox" name="topping" value="Add Jalapeno Peppers"> Add Jalapeno Peppers</label>
                                        <label><input type="checkbox" name="topping" value="Add Cucumbers"> Add Cucumbers</label>
                                        <label><input type="checkbox" name="topping" value="Add Oil"> Add Oil</label>
                                        <label><input type="checkbox" name="topping" value="Add Vinegar"> Add Vinegar</label>
                                        <label><input type="checkbox" name="topping" value="Add Salt"> Add Salt</label>
                                        <label><input type="checkbox" name="topping" value="Add Pepper"> Add Pepper</label>
                                        <label><input type="checkbox" name="topping" value="Add Oregano"> Add Oregano</label>


                                        <label>Quantity: <input type="number" name="quantity" value="1" min="1"></label>
                                        <textarea placeholder="Special Instructions" name="instructions"></textarea>
                                        <button data-product="{{ product.id }}" data-action="add" id="addIngredientsBtn" disabled>Add Ingredients</button>
                                    </form>

                                </div>
                            `);
                        }
                    }
                        break;

                    
                    case 'Drinks':
                    // If the drink is fountain drink, add a choice of soda 
                    console.log(name);
                    if ( name.includes('Fountain')) {
                        modal.find('.modal-content').append(`
                            <div class="popup" id="popup">
                                <form>
                                    <h3>Please choose a size (Required - Choose 1)</h3>
                                    <label><input type="radio" name="size" value="Regular"> Regular (20 oz) $2.50</label>
                                    <label><input type="radio" name="size" value="Large" data-price="0.50"> Large (32 oz) $3.00</label>

                                    <h3>Choose a soda (Required - Choose 1)</h3>
                                    <label><input type="radio" name="soda" value="Pepsi"> Pepsi</label>
                                    <label><input type="radio" name="soda" value="Diet Pepsi"> Diet Pepsi</label>
                                    <label><input type="radio" name="soda" value="Mountain Dew"> Mountain Dew</label>
                                    <label><input type="radio" name="soda" value="Dr Pepper"> Dr Pepper</label>
                                    <label><input type="radio" name="soda" value="Diet Dr Pepper"> Diet Dr Pepper</label>
                                    <label><input type="radio" name="soda" value="Root Beer"> Root Beer</label>
                                    <label><input type="radio" name="soda" value="Sierra Mist"> Sierra Mist</label>
                                    <label><input type="radio" name="soda" value="Orange Gatorade"> Orange Gatorade</label>
                                    <label><input type="radio" name="soda" value="Sweet Tea"> Sweet Tea</label>
                                    <label><input type="radio" name="soda" value="Unsweet Tea"> UNSWEET TEA</label>
                                    <label><input type="radio" name="soda" value="Home Made Lemonade"> Home Made Lemonade</label>
                                    <label><input type="radio" name="soda" value="Bottled Water"> Bottled Water</label>

                                    <label>Quantity: <input type="number" name="quantity" value="1" min="1"></label>
                                    <textarea placeholder="Special Instructions" name="instructions"></textarea>
                                    <button data-product={{product.id}} data-action="add" id="addIngredientsBtn" disabled>Add Ingredients</button>
                                </form>
                            </div>
                        `);
                    } else {
                        modal.find('.modal-content').append(`
                            <div class="popup" id="popup">
                                <form>
                                    <h3>Please choose a size (Required - Choose 1)</h3>
                                    <label><input type="radio" name="size" value="Regular"> Regular (20 oz) $2.25</label>
                                    <label><input type="radio" name="size" value="Large" data-price="0.50"> Large (32 oz) $2.75</label>

                                    <label>Quantity: <input type="number" name="quantity" value="1" min="1"></label>
                                    <textarea placeholder="Special Instructions" name="instructions"></textarea>
                                    <button data-product={{product.id}} data-action="add" id="addIngredientsBtn" disabled>Add Ingredients</button>
                                </form>
                            </div>
                        `);
                    }
                        break;

                        
                    case 'Sides':
                    // If the side is chips Choose a flavor
                    if ( name.includes('Chips') ) {
                        modal.find('.modal-content').append(`
                            <div class="popup" id="popup">
                                <form>
                                    <h3>Choose a flavor (Required - Choose 1)</h3>
                                    <label><input type="radio" name="flavor" value="Lays Plain"> Lays Plain</label>
                                    <label><input type="radio" name="flavor" value="Lays BBQ"> Lays BBQ</label>
                                    <label><input type="radio" name="flavor" value="Jalapeno Kettle Chips"> Jalapeno Kettle Chips</label>
                                    <label><input type="radio" name="flavor" value="Sour Cream N Onion Kettle Chips"> Sour Cream N Onion Kettle Chips</label>
                                    <label><input type="radio" name="flavor" value="Salt N Vinegar Kettle Chips"> Salt N Vinegar Kettle Chips</label>
                                    <label><input type="radio" name="flavor" value="Plain Fritos"> Plain Fritos</label>


                                    <label>Quantity: <input type="number" name="quantity" value="1" min="1"></label>
                                    <textarea placeholder="Special Instructions" name="instructions"></textarea>
                                    <button data-product={{product.id}} data-action="add" id="addIngredientsBtn" disabled>Add Ingredients</button>
                                </form>
                            </div>
                        `);
                    } else if (name.includes("Deviled Egg")) {
                        modal.find('.modal-content').append(`
                            <div class="popup" id="popup">
                                <form>
                                    <h3>Choose a size (Required - Choose 1)</h3>
                                    <label><input type="radio" name="size" value="Small"> Regular $3.00</label>
                                    <label><input type="radio" name="size" value="Large" data-price="3.00"> Large $6.00</label>

                                    <label>Quantity: <input type="number" name="quantity" value="1" min="1"></label>
                                    <textarea placeholder="Special Instructions" name="instructions"></textarea>
                                    <button data-product={{product.id}} data-action="add" id="addIngredientsBtn" disabled>Add Ingredients</button>
                                </form>
                            </div>
                        `);
                    } else if (name.includes("Fries")) {
                        modal.find('.modal-content').append(`
                        <div class="popup" id="popup">
                            <form>
                                <h3>Please choose a size (Required - Choose 1)</h3>
                                <label><input type="radio" name="size" value="Regular"> Regular $3.50</label>
                                <label><input type="radio" name="size" value="Large" data-price="3.25"> Large $6.75</label>

                                <label>Quantity: <input type="number" name="quantity" value="1" min="1"></label>
                                <textarea placeholder="Special Instructions" name="instructions"></textarea>
                                <button data-product={{product.id}} data-action="add" id="addIngredientsBtn" disabled>Add Ingredients</button>
                            </form>
                        </div>
                    `);
                    } else {
                        modal.find('.modal-content').append(`
                            <div class="popup" id="popup">
                                <form>
                                    <h3>Please choose a size (Required - Choose 1)</h3>
                                    <label><input type="radio" name="size" value="Regular"> Regular $3.50</label>
                                    <label><input type="radio" name="size" value="Large" data-price="3.25"> Large $6.75</label>

                                    <label>Quantity: <input type="number" name="quantity" value="1" min="1"></label>
                                    <textarea placeholder="Special Instructions" name="instructions"></textarea>
                                    <button data-product={{product.id}} data-action="add" id="addIngredientsBtn" disabled>Add Ingredients</button>
                                </form>
                            </div>
                        `);
                    } 
                        break;


                    case 'Breakfast':
                        // Meat, Egg and Cheese sandwich
                    modal.find('.modal-content').append(`
                        <div class="popup" id="popup">
                            <form>
                                <h3>Choose a meat (Required - Choose 1)</h3>
                                <label><input type="radio" name="meat" value="pork-roll"> Pork Roll</label>
                                <label><input type="radio" name="meat" value="bacon"> Bacon</label>
                                <label><input type="radio" name="meat" value="sausage"> Sausage</label>
                                <label><input type="radio" name="meat" value="ham"> Ham</label>
                                <label><input type="radio" name="meat" value="turkey-sausage"> Turkey Sausage</label>

                                <h3>Choose a cheese (Required - Choose 1)</h3>
                                <label><input type="radio" name="cheese" value="american"> American</label>
                                <label><input type="radio" name="cheese" value="swiss"> Swiss</label>
                                <label><input type="radio" name="cheese" value="provolone"> Provolone</label>
                                <label><input type="radio" name="cheese" value="pepper-jack"> Pepper Jack</label>

                                <h3>Choose a bread (Required - Choose 1)</h3>
                                <label><input type="radio" name="bread" value="kaiser-roll"> Kaiser Roll</label>
                                <label><input type="radio" name="bread" value="croissant"> Croissant</label>
                                <label><input type="radio" name="bread" value="white-bread"> White Bread</label>
                                <label><input type="radio" name="bread" value="wheat-bread"> Wheat Bread</label>
                                <label><input type="radio" name="bread" value="rye-bread"> Rye Bread</label>

                                <h3>Would you like toppings? (Optional - Choose as many as you like)</h3>
                                <label><input type="checkbox" name="topping" value="salt"> Salt</label>
                                <label><input type="checkbox" name="topping" value="pepper"> Pepper</label>
                                <label><input type="checkbox" name="topping" value="ketchup"> Ketchup</label>
                                <label><input type="checkbox" name="topping" value="mayo"> Mayo</label>
                                <label><input type="checkbox" name="topping" value="extra-egg"> Extra Egg</label>
                                <label><input type="checkbox" name="topping" value="hash-brown-patty"> Hash Brown Patty on the Sandwich</label>
                                <label><input type="checkbox" name="topping" value="extra-meat"> Extra Meat</label>
                                <label><input type="checkbox" name="topping" value="shredded-hash-browns"> Shredded Hash Browns Side</label>
                                <label><input type="checkbox" name="topping" value="fried-egg"> Fried Egg</label>
                                <label><input type="checkbox" name="topping" value="scrambled-egg"> Scrambled Egg</label>

                                <label>Quantity: <input type="number" name="quantity" value="1" min="1"></label>
                                <textarea placeholder="Special Instructions" name="instructions"></textarea>
                                <button data-product={{product.id}} data-action="add" id="addIngredientsBtn" disabled>Add Ingredients</button>
                            </form>
                        </div>
                    `);           
                        break;

                    default:
                        break;
                }

                // The default price is the product price and button is disabled until at least one ingredient is checked
                modal.find('.modal-content form button').html(`Add Ingredients - $${price}`);
                modal.find('.modal-content form button').prop('disabled', true);
                modal.find('.modal-content form button').css('background-color', '#ccc');

                

                if (category == 'Desserts') {
                    modal.find('.modal-content form button').prop('disabled', false);
                    // If the submit button is enabled, change the color to blue
                    modal.find('.modal-content form button').css('background-color', '#007bff');
                }



                // Add event listener to the form, enable or disable the submit button based on the user's choice
                modal.find('.modal-content form').on('change', function() {

                    const inputElements = modal.find('.modal-content form input');
                    const groupStatus = {};
                    inputElements.each(function() {
                        const name = $(this).attr('name');
                        if (groupStatus[name] === undefined) {
                            groupStatus[name] = false;
                        }
                        if ($(this).prop('checked')) {
                            groupStatus[name] = true;
                        }

                        groupStatus["quantity"] = true;
                    });

                    const allGroupsChecked = Object.values(groupStatus).every(v => v === true);
                    console.log(groupStatus)
                    console.log(allGroupsChecked);
                    if (allGroupsChecked) {
                        modal.find('.modal-content form button').prop('disabled', false);
                    } else {
                        modal.find('.modal-content form button').prop('disabled', true);
                    }

                    // If the user choose dessert, do not disabled the submit button
                    console.log(category);
                    if (category == 'Desserts') {
                        modal.find('.modal-content form button').prop('disabled', false);
                    }

                    // If the submit button is enabled, change the color to blue
                    if (modal.find('.modal-content form button').prop('disabled') == false) {
                        modal.find('.modal-content form button').css('background-color', '#007bff');
                    } else {
                        modal.find('.modal-content form button').css('background-color', '#ccc');
                    }

                    // If the user click differen size of the food and side that has different price, update the price
                    const sideRadioInputs = modal.find('input[name="side"]');
                    const selectedSide = sideRadioInputs.filter(':checked');
                    const sizeRadioInputs = modal.find('input[name="size"]');
                    const selectedSize = sizeRadioInputs.filter(':checked');

                    // If the user clicks quantity input field, calculate the price based on the quantity
                    const quantity = modal.find('.modal-content form input[name="quantity"]').val();
                    console.log(selectedSide.data('price'));
                    const price = parseFloat(button.data('price')) + (parseFloat(selectedSide.data('price')) || 0) + (parseFloat(selectedSize.data('price')) || 0);
                    currentProductPrice = price;
                    console.log(price);
                    const total = quantity * price;
                    modal.find('.modal-content form button').html(`Add Ingredients - $${total.toFixed(2)}`);
                    
                });

                // If the user clicks the add ingredients button, add the ingredients to the cart
                modal.find('.modal-content form button').on('click', function() {
                    // If combo conver the string with input name, example => "Size:{Large} Topping:{Add Lettuce, Add Tomato} Side:{Fries} Drinks:{Pepsi}"
                    let selectedIngredients;
                    selectedIngredients = "";
                    const inputElements = modal.find('.modal-content form input');
                    inputElements.each(function() {
                        const name = $(this).attr('name');
                        if ($(this).prop('checked')) {
                            selectedIngredients += `${name}:{${$(this).val()}}. `;
                        }
                    });

                
                    // Get the instructions from the textarea and combine them with the selected ingredients. Start with a new line and add the word "Special instructions: " before the instructions
                    let instructions = ""
                    console.log(typeof modal.find('.modal-content form textarea').val());
                    if (modal.find('.modal-content form textarea').val() == '') {
                        modal.find('.modal-content form textarea').val('No special instructions');
                    } else{
                        instructions = '\nSpecial instructions: ' + modal.find('.modal-content form textarea').val();
                    }
                    
                    console.log(instructions);
                    let ingredients = `${selectedIngredients} ${instructions}`;
                    ingredients = ingredients.trim();

                    console.log("{" + ingredients + "}");
                    
                    // Get the quantity from the quantity input field
                    const quantityInput = document.querySelector('input[name="quantity"]');

                    const quantity = quantityInput.value;
                    console.log(quantity);
                    console.log(this.dataset)
                    console.log(this.dataset.product)
                    const productId = button.data('product');
                    action = "add"
                    for (let i = 0; i < quantity; i++) {
                        console.log('productId:', productId, 'action:', action)
                        console.log('USER:', user)
                        if (user == 'AnonymousUser'){
                            addCookieItem(productId, action, ingredients)
                        }else{
                            updateUserOrder(productId, action, ingredients)
                        }
                
                    }
                
                    // popup.style.display = 'none';
                    // overlay.style.display = 'none';
                });
            });

            // If the user type in the quantity input field, calculate the price based on the quantity and update the price
            $('#productModal').on('keyup', function(event) {
                const button = $(event.relatedTarget); // Button that triggered the modal
                const category = button.data('category'); // Extract info from data-* attributes
                const price = currentProductPrice
                console.log(price);
                const modal = $(this);
                const quantity = modal.find('.modal-content form input[name="quantity"]').val();
                const total = quantity * price;
                modal.find('.modal-content form button').html(`Add Ingredients - $${total.toFixed(2)}`);
            });


        });




      </script>
      <script src="{% static 'js/store.js' %}"></script>
      {% endblock content %}
